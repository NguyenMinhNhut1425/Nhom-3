CREATE DATABASE [QUANLYLAODONG] 
ON  PRIMARY 
( NAME = N'QUANLYLAODONG',
  FILENAME = N'C:\cosodulieu\QUANLYLAODONG.mdf' ,
  SIZE = 4048KB , MAXSIZE = 10240KB , FILEGROWTH = 20%)
LOG ON 
( NAME = N'QUANLYLAODONG_log',
  FILENAME = N'C:\cosodulieu\QUANLYLAODONG_log.ldf' ,
  SIZE = 1024KB , MAXSIZE = 10240KB , FILEGROWTH = 10%)

--PHONGBAN(MAPB, TENPB)
--NHANVIEN(MANV, HOTEN, NGAYSINH, PHAI, DIACHI, MAPB)
--CONGTRINH(MACT, TENCT, DIADIEM, NGAYCAPGP, NGAYKC, NGAYHT)
--PHANCONG(MACT, MANV, SLNGAYCONG)

use QUANLYLAODONG

--Tạo bảng phòng ban
CREATE TABLE PHONGBAN 
(
    MAPB VARCHAR(5) PRIMARY KEY,
    TENPB NVARCHAR(50)
)
 --Tạo bảng nhân viên
CREATE TABLE NHANVIEN 
(
    MANV VARCHAR(5) PRIMARY KEY,
    HOTEN NVARCHAR(50),
    NGSINH DATE,
    PHAI NVARCHAR(10),
    DIACHI NVARCHAR(100),
    MAPB VARCHAR(5) FOREIGN KEY REFERENCES PHONGBAN(MAPB)
)
--Tạo bảng công trình
CREATE TABLE CONGTRINH 
(
    MACT VARCHAR(5) PRIMARY KEY,
    TENCT NVARCHAR(100),
    DIADIEM NVARCHAR(100),
    NGAYCAPGP DATE,
    NGAYKC DATE,
    NGAYHT DATE
)
--Tạo bảng phân công
CREATE TABLE PHANCONG 
(
    MACT VARCHAR(5),
    MANV VARCHAR(5),
    SLNGAYCONG INT,
    PRIMARY KEY (MACT, MANV),
    FOREIGN KEY (MACT) REFERENCES CONGTRINH(MACT),
    FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV)
)
--Nhập dữ liệu mẫu
--Bảng PHONGBAN
INSERT INTO PHONGBAN VALUES 
    ('PB01', N'Phòng Kế Toán'),
    ('PB02', N'Phòng Kinh Doanh'),
    ('PB03', N'Phòng Kỹ Thuật'),
    ('PB04', N'Phòng Tổ Chức'),
    ('PB05', N'Phòng Chuyên Môn')
--Bảng NHANVIEN
INSERT INTO NHANVIEN VALUES 
    ('NV01', N'Nguyễn Văn A', '1990-05-10', N'Nam', N'Hà Nội', 'PB01'),
	('NV02', N'Trần Thị B', '1992-07-15', N'Nữ', N'Hải Phòng', 'PB02'),
	('NV03', N'Lê Văn C', '1988-03-22', N'Nam', N'Đà Nẵng', 'PB03'),
	('NV04', N'Phạm Thị D', '1995-11-05', N'Nữ', N'Cần Thơ', 'PB04'),
	('NV05', N'Hồ Văn E', '1993-09-30', N'Nam', N'Huế', 'PB05')
--Bảng CONGTRINH
INSERT INTO CONGTRINH VALUES 
	('CT01', N'Cầu Long Biên', N'Hà Nội', '2020-01-10', '2020-02-01', '2020-12-31'),
	('CT02', N'Hầm Thủ Thiêm', N'TP.HCM', '2019-03-15', '2019-04-10', '2020-10-20'),
	('CT03', N'Cao tốc Bắc-Nam', N'Việt Nam', '2021-05-20', '2021-06-15', '2024-04-30'),
	('CT04', N'Sân bay Long Thành', N'Đồng Nai', '2022-08-25', '2022-09-10', '2026-06-02'),
	('CT05', N'Nhà máy lọc dầu', N'Quảng Ngãi', '2018-12-05', '2019-01-01', '2020-06-30')
--Bảng PHANCONG
INSERT INTO PHANCONG VALUES 
	('CT01', 'NV01', 100),
	('CT01', 'NV02', 80),
	('CT02', 'NV03', 120),
	('CT03', 'NV04', 90),
	('CT04', 'NV05', 110),
	('CT02', 'NV01', 70),
	('CT03', 'NV02', 60)
